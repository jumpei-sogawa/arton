<%= hidden_field_tag "articleTitle", @article.title %>
<%= hidden_field_tag "articleBody", @article.body %>

<div class="row mt10 mb10">
  <div class="off-2 col-8 off-0-xsmall col-12-xsmall">
    <div class="article-container">
      <%= image_tag @article.image.to_s, class: "image w100" %>
      <div id="preview-title" class="bold dark mb10" style="font-size:1.8em"></div>
      <div id="preview-body"></div>

      <%= link_to articles_path, class: "mb5 button bb0" do %>
        <i class="fas fa-feather-alt"></i>
        一覧へ戻る
      <% end %>

      <% if is_admin? %>
        <div>
          <% if @article.published %>
            <div class="mb10">
                <span class="dark">ステータス：</span>
                <i class="fas fa-cloud dark"></i>
                <span class="bold dark">公開</span>
              </div>
            <%= link_to "/articles/#{@article.id}/unpublish", method: :patch, data: { confirm: 'ほんとに非公開にしちゃうの？' }, class: "mb5 button dark" do %>
              <i class="fas fa-pause pink"></i>
              非公開にする
            <% end %>
          <% else %>
            <div class="mb10">
              <span class="dark">ステータス：</span>
              <i class="fas fa-pause pink"></i>
              <span class="pink">非公開</span>
            </div>
            <%= link_to "/articles/#{@article.id}/publish", method: :patch, data: { confirm: 'ほんとに公開する？' }, class: "mb5 button dark" do %>
              <i class="fas fa-cloud-upload-alt pink"></i>
              公開する
            <% end %>
          <% end %>
          <%= link_to edit_article_path(@article), class: "button dark" do %>
            <i class="fas fa-edit pink"></i>
            編集する
          <% end %>
          <%= link_to articles_admin_path, class: "mb5 button dark bb0" do %>
            <i class="fas fa-hammer pink"></i>
            管理画面へ戻る
          <% end %>

          <%= link_to @article, method: :delete, data: { confirm: '本当に削除する？' }, class: "button" do %>
            <i class="far fa-trash-alt"></i>
            削除する
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>


<%= javascript_include_tag 'marked.js' %>

<script type="text/javascript" language="javascript">
  $previewTitle = $('#preview-title');
  $previewBody = $('#preview-body');

  marked.setOptions({breaks : true});

  $previewTitle.html(
    articleTitle.value
  );

  $previewBody.html(
    marked(articleBody.value)
  );

</script>