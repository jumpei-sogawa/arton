<div class="row mb10">
  <div class="off-3 col-6 off-0-xsmall col-12-xsmall">
    <% @exhb_logs.each do |exhb_log| %>
      <% if exhb_log.exhibition.id == 1 %>
        <%= render partial: "logs/show_art_log", locals: {exhb_log: exhb_log} %>
      <% else %>
        <%= render partial: "logs/show", locals: {exhb_log: exhb_log} %>
      <% end %>
    <% end %>
  </div>
</div>

<%= javascript_include_tag 'swiper.js' %>

<script type="text/javascript" language="javascript">
  <% @exhb_logs.each do |exhb_log| %>
    // Ellipsis Button
    $ellipsisButton = $('#ellipsis<%= exhb_log.id %>');
    $overlay<%= exhb_log.id %> = $('#overlay<%= exhb_log.id %>');
    $ellipsisButton.on('click', function() {
      $overlay<%= exhb_log.id %>.fadeIn();
      $overlay<%= exhb_log.id %>.removeClass('non-active');
    });

    $overlay<%= exhb_log.id %>.on('click', function() {
      $overlay<%= exhb_log.id %>.addClass('non-active');
      $overlay<%= exhb_log.id %>.fadeOut();
    });

    // Swiper
    swiperWidth = $('.swiper<%= exhb_log.id %>').width();
    var sliderCount = 3;
    var slideOffset = 0;
    <% if exhb_log.art_logs.count == 1 %>
      sliderCount = 1;
      slideOffset = swiperWidth / 3 + 10 / 3;
    <% elsif exhb_log.art_logs.count == 2 %>
      sliderCount = 2;
      slideOffset = swiperWidth / 6 + 10 / 6;
    <% end %>

    var mySwiper<%= exhb_log.id %> = new Swiper('.swiper<%= exhb_log.id %>', {
      navigation: {
        prevEl: '.prev<%= exhb_log.id %>',
        nextEl: '.next<%= exhb_log.id %>',
      },
      slidesPerView: 3,
      slidesOffsetBefore: slideOffset,
      spaceBetween: 10,
      initialSlide: 0,
      pagination: {
        el: '.page<%= exhb_log.id %>',
        type: 'bullets',
        clickable: true,
      },
    });
  <% end %>
</script>
